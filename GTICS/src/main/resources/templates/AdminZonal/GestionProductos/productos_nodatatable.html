<!DOCTYPE html>
<html lang="en">
   <head>
      <!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta content="Codescandy" name="author">
      <title>Productos</title>
      <!-- Favicon icon-->
<link rel="shortcut icon" type="image/x-icon" href="../assets/images/favicon/favicon.ico">

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<style>
			.custom-popup{
				border-radius: 10px;
			}
			.swal2-styled{
				border-radius: 8px;
			}
		   .swal2-styled.swal2-confirm {
			   background-color: #28a745;
			   color: white;
		   }

		   .swal2-styled.swal2-cancel {
			   background-color: #dc3545;
			   color: white;
		   }
</style>
<!-- Libs CSS -->
<link href="../assets/libs/bootstrap-icons/font/bootstrap-icons.min.css" rel="stylesheet">
<link href="../assets/libs/feather-webfont/dist/feather-icons.css" rel="stylesheet">
<link href="../assets/libs/simplebar/dist/simplebar.min.css" rel="stylesheet">


<!-- Theme CSS -->
<link rel="stylesheet" href="../assets/css/theme.min.css">
	   <style>

		   .logoImagen{
			   height: 80px;
			   width: 250px;
		   }
		   .logoImagenCelulares{
			   height: 80px;
			   width: 220px;
		   }
	   </style>

   </head>

   <body>
      <!-- main -->
      <div>
         <!-- navbar -->
		  <div th:insert="~{fragments/navbarAdminZonal.html :: navbarSuperior}"></div>


         <div class="main-wrapper">
			 <!-- navbar -->
			 <!-- navbar vertical (para pc)-->
			 <div th:insert="~{fragments/navbarAdminZonal.html :: navbarVerticalPc('Productos')}"></div>

			 <!-- navbar vertical (para celular)-->
			 <div th:insert="~{fragments/navbarAdminZonal.html :: navbarVerticalCelulares('Productos')}"></div>

			 <!-- COONTENIDO DE LA PAGINA -->
            <main class="main-content-wrapper">
               <section class="container">
				   <h1 class="mb-6">Lista de productos</h1>
				   <div class="table-responsive border-0">
					   <!-- Table -->
					   <table class="table mb-0 text-nowrap">
						   <!-- Table Head -->
						   <thead class="table-light">
						   <tr>
							   <th class="border-0">&nbsp;</th>
							   <th class="border-0">Producto</th>
							   <th class="border-0">Fecha de arribo</th>
							   <th class="border-0">Stock</th>
							   <th class="border-0"></th>
						   </tr>
						   </thead>
						   <tbody>
						   <!-- Table body -->
						   <tr>
							   <td class="align-middle border-top-0 w-0">
								   <a href="#" disabled=""> <img src="../../assets/images/products/product-img-1.jpg" alt="Imagen del producto" class="icon-shape icon-xl"></a>
							   </td>
							   <td class="align-middle border-top-0">
								   <h6 class="mb-0">Producto 1</h6>
							   </td>
							   <td class="align-middle border-top-0">
								   <form>
									   <span class="d-inline-block" tabindex="0" data-bs-toggle="popover" data-bs-placement="bottom" data-bs-trigger="hover focus" data-bs-content="Agregar fecha">
									   		<input class="btn btn-primary arrivalDate" type="date" >
									   </span>

									   <button type="submit" class="btn btn-info saveButton saveAlert" style="display: none;">
										   <i class="bi-save-fill"></i>
									   </button>
									   <button type="submit" class="btn btn-danger deleteButton delAlert" style="display: none;">
										   <i class="bi-trash-fill"></i>
									   </button>
								   </form>
								   <!--si el input que se muestre una esoecie de notificacion con el mensaje-->
							   </td>
							   <td class="align-middle border-top-0">
								   50
							   </td>

							   <td class="align-middle border-top-0">
								   <button style="width: 100%" type="button" class="btn btn-outline-info reposicion"disabled>Solicitar reposición</button>
							   </td>
						   </tr>
						   <tr>
							   <td class="align-middle border-top-0 w-0">
								   <a href="#" disabled=""> <img src="../../assets/images/products/product-img-2.jpg" alt="Imagen del producto" class="icon-shape icon-xl"></a>
							   </td>
							   <td class="align-middle border-top-0">
								   <h6 class="mb-0">Producto 2</h6>
							   </td>
							   <td class="align-middle border-top-0">
								   <form>
									   <input class="btn btn-primary arrivalDate" type="date" value="2020-08-14">
									   <button type="submit" class="btn btn-info saveButton  saveAlert" style="display: none;">
										   <i class="bi-save-fill"></i>
									   </button>
									   <button type="submit" class="btn btn-danger deleteButton delAlert" >
										   <i class="bi-trash-fill"></i>
									   </button>
								   </form>
							   </td>
							   <td class="align-middle border-top-0">
								   20
							   </td>

							   <td class="align-middle border-top-0">
								   <button style="width: 100%" type="button" class="btn btn-outline-info reposicion">Solicitar reposición</button>
							   </td>
						   </tr>

						   <tr>
							   <td class="align-middle border-top-0 w-0">
								   <a href="#" disabled=""> <img src="../../assets/images/products/product-img-3.jpg" alt="Imagen del producto" class="icon-shape icon-xl"></a>
							   </td>
							   <td class="align-middle border-top-0">
								   <h6 class="mb-0">Producto 3</h6>
							   </td>
							   <td class="align-middle border-top-0">
								   <form>
									   <input class="btn btn-primary arrivalDate" type="date" value="2020-08-14">
									   <button type="submit" class="btn btn-info saveButton saveAlert" style="display: none;">
										   <i class="bi-save-fill"></i>
									   </button>
									   <button type="submit" class="btn btn-danger delAlert" >
										   <i class="bi-trash-fill"></i>
									   </button>
								   </form>
							   </td>
							   <td class="align-middle border-top-0">
								   11
							   </td>

							   <td class="align-middle border-top-0">
								   <button style="width: 100%" type="button" class="btn btn-outline-warning reposicionRevisar">Revisar solicitud</button>
							   </td>
						   </tr>

						   </tbody>
					   </table>
				   </div>

               </section>
            </main>
         </div>
	  </div>

      <!-- Libs JS -->
<!-- <script src="../assets/libs/jquery/dist/jquery.min.js"></script> -->
<script src="../assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="../assets/libs/simplebar/dist/simplebar.min.js"></script>

<!-- Theme JS -->
<script src="../assets/js/theme.min.js"></script>
	  <script src="../assets/libs/apexcharts/dist/apexcharts.min.js"></script>
      <script src="../assets/js/vendors/chart.js"></script>
	  <script>
		  document.querySelectorAll('.arrivalDate').forEach((dateInput, index) => {
			  var saveButton = document.querySelectorAll('.saveButton')[index];
			  var deleteButton = document.querySelectorAll('.deleteButton')[index];

			  dateInput.addEventListener('input', function() {
				  if (dateInput.value) {
					  saveButton.style.display = 'inline-block'; // Muestra el botón si hay una fecha
					  deleteButton.style.display = 'inline-block'; // Muestra el botón de eliminar
				  } else {
					  saveButton.style.display = 'none'; // Oculta el botón si el campo está vacío
					  deleteButton.style.display = 'none'; // Oculta el botón de eliminar
				  }
			  });
		  });;
	  </script>
	  <script>
		  //Popup reposicion
		  document.querySelectorAll('.reposicion').forEach(button => {
			  button.addEventListener('click', function() {
				  Swal.fire({
					  title: 'Solicitud de reposición',
					  html: `
                <p>Ingrese la cantidad de productos que desea solicitar:</p>
                <input type="number" id="productQuantity" class="swal2-input" value="0" min="0">
            `,
					  showCancelButton: true,
					  confirmButtonText: 'Enviar',
					  cancelButtonText: 'Cancelar',
					  customClass:{
						  popup: 'custom-popup'
					  },
					  focusConfirm: false,
					  preConfirm: () => {
						  const quantity = Swal.getPopup().querySelector('#productQuantity').value;
						  if (!quantity || quantity <= 0) {
							  Swal.showValidationMessage(`Por favor ingrese una cantidad válida.`);
						  }
						  return quantity;
					  }
				  }).then((result) => {
					  if (result.isConfirmed) {
						  Swal.fire(`Se solicitaron ${result.value} productos`, '','success');
					  }
				  });
			  });
		  });

	  </script>
	  <script>
		  //Popup reposicion REVISION
		  document.querySelectorAll('.reposicionRevisar').forEach(button => {
			  button.addEventListener('click', function() {
				  Swal.fire({
					  title: 'Solicitud de reposición',
					  html: `
                <p>Se solicitaron</p>
                <input type="number" id="productQuantity" class="swal2-input" value="11" min="0" disabled>
                <p>productos</p>
            `,
					  showCancelButton: true,
					  confirmButtonText: 'Editar',
					  cancelButtonText: 'Eliminar',
					  customClass: {
						  popup: 'custom-popup'
					  },
					  focusConfirm: false
				  }).then((result) => {
					  if (result.isConfirmed) {
						  // Edit action
						  Swal.fire({
							  title: 'Solicitud de reposición',
							  html: `
                        <p>Ingrese la cantidad de productos que desea solicitar:</p>
                        <input type="number" id="productQuantity" class="swal2-input" value="0" min="0">
                    `,
							  showCancelButton: true,
							  confirmButtonText: 'Guardar',
							  cancelButtonText: 'Cancelar',
							  customClass: {
								  popup: 'custom-popup'
							  },
							  focusConfirm: false,
							  preConfirm: () => {
								  const quantity = Swal.getPopup().querySelector('#productQuantity').value;
								  if (!quantity || quantity <= 0) {
									  Swal.showValidationMessage(`Por favor ingrese una cantidad válida.`);
								  }
								  return quantity;
							  }
						  }).then((result) => {
							  if (result.isConfirmed) {
								  Swal.fire(`Se actualizó la orden a ${result.value} productos`,'' ,'success');
							  }
						  });
					  } else if (result.dismiss === Swal.DismissReason.cancel) {
						  // Delete action with confirmation
						  Swal.fire({
							  title: 'Confirmar eliminación',
							  text: "¿Está seguro de que deseas cancelar esta solicitud de reposición?",
							  icon: 'warning',
							  showCancelButton: true,
							  confirmButtonText: 'Confirmar',
							  cancelButtonText: 'Cancelar',
							  customClass: {
								  popup: 'custom-popup'
							  }
						  }).then((confirmResult) => {
							  if (confirmResult.isConfirmed) {
								  Swal.fire('Eliminado', 'La solicitud ha sido eliminada.', 'success');
							  }
						  });
					  }
				  });
			  });
		  });
	  </script>
      <script>
		  document.querySelectorAll('.saveAlert').forEach(button => {
			  button.addEventListener('click', function() {

				  Swal.fire({
					  title: '¿Estás seguro?',
					  text: "¿Deseas guardar los cambios?",
					  icon: 'question',
					  showCancelButton: true,
					  confirmButtonColor: '#3085d6',
					  cancelButtonColor: '#d33',
					  confirmButtonText: 'Sí, guardar',
					  cancelButtonText: 'Cancelar'
				  }).then((result) => {
					  if (result.isConfirmed) {
						  // Aquí puedes agregar la lógica para guardar los datos
						  Swal.fire(
								  '¡Guardado!',
								  'Los cambios han sido guardados.',
								  'success'
						  );
					  }
				  });
			  });
		  });

	  </script>
   <script>
	   document.querySelectorAll('.delAlert').forEach(button => {
		   button.addEventListener('click', function() {

			   Swal.fire({
				   title: '¿Estás seguro?',
				   text: "¿Deseas eliminar los cambios?",
				   icon: 'warning',
				   showCancelButton: true,
				   confirmButtonColor: '#3085d6',
				   cancelButtonColor: '#d33',
				   confirmButtonText: 'Sí, eliminar',
				   cancelButtonText: 'Cancelar'
			   }).then((result) => {
				   if (result.isConfirmed) {
					   // Aquí puedes agregar la lógica para guardar los datos
					   Swal.fire(
							   '¡Guardado!',
							   'Los cambios han sido eliminados.',
							   'success'
					   );
				   }
			   });
		   });
	   });
   </script>
   </body>
</html>
